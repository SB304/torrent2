<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Warning Torrent &mdash; Mini2Team2</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Free HTML5 Template by FREEHTML5.CO" />
<meta name="keywords"
	content="free html5, free template, free bootstrap, html5, css3, mobile first, responsive" />
<meta name="author" content="FREEHTML5.CO" />
<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet"
	href="/torrent/resources/bootstrap/css/bootstrap.min.css">
<!-- Google Webfonts -->
<link
	href='http://fonts.googleapis.com/css?family=Roboto:400,300,100,500'
	rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700'
	rel='stylesheet' type='text/css'>
<!-- Animate.css / Icomoon Icon Fonts / Magnific Popup / Salvattore / Theme Style / Modernizr JS-->
<link rel="stylesheet" href="/torrent/resources/css/animate.css">
<link rel="stylesheet" href="/torrent/resources/css/icomoon.css">
<link rel="stylesheet" href="/torrent/resources/css/magnific-popup.css">
<link rel="stylesheet" href="/torrent/resources/css/salvattore.css">
<link rel="stylesheet" href="/torrent/resources/css/style.css">
<script src="/torrent/resources/js/modernizr-2.6.2.min.js"></script>
<!-- jQuery / jQuery Easing / Bootstrap  / Waypoints / Magnific Popup / Salvattore / Main JS -->
<script src="/torrent/resources/js/jquery.min.js"></script>
<script src="/torrent/resources/js/jquery.easing.1.3.js"></script>
<script src="/torrent/resources/js/bootstrap.min.js"></script>
<script src="/torrent/resources/js/jquery.waypoints.min.js"></script>
<script src="/torrent/resources/js/jquery.magnific-popup.min.js"></script>
<script src="/torrent/resources/js/salvattore.min.js"></script>
<script src="/torrent/resources/js/main.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.js"></script>
<!-- sweet -->
<script src="/torrent/resources/sweet/sweetalert.min.js"></script>
<link rel="stylesheet" href="/torrent/resources/sweet/sweetalert.css"/>
</head>

	<!-- 날짜 표기 설정 -->
	<script>
		Handlebars.registerHelper('prettyDate', function(regDate) {
			var date = new Date(regDate);
			return date.getFullYear() + "-" + (date.getMonth() + 1) + "-"
					+ date.getDate();
		});
	</script>
	

<body>
	<div class="topMenu"></div>
	<!-- END .header -->

	<div id="fh5co-main">
		<div class="container">
			<div>
				<ol>
					<li>home</li>
					<li>예능 게시판</li>
				</ol>
			</div>
			<!--  @@@@@@@@@@@ 이부분에 자신의 페이지 코드 작성하시면 됩니다  @@@@@@@@@@-->
			<table>
				<tbody id="pageTable">
				</tbody>

			</table>
			<script id="list-template" type="text/x-handlebars-template">
				{{#each .}}
						<tr>
							<td>제목</td>
							<td><input type="text" name="title" value={{title}}></td>
						</tr>
						<tr>
							<td>내용</td>
							<td><textarea name="content" rows="5" cols="70" style="resize: none;">{{content}}</textarea></td>
						</tr>
				{{/each}}
			</script>
			<button type="submit">수정</button>	
			<input type='reset' class="reset" value='재입력'/>
			<input type="button" value="목록"/>
		</div>
	</div>
	<div class="footer"></div>


	<script>
		$("div.topMenu").load("/torrent/views/include/topMenu.html");
		$("div.footer").load("/torrent/views/include/footer.html");
		
		// bno 파라미터 얻어오기
		var getParameters = function(paramName) {
			var returnValue;

			var url = location.href;

			var parameters = (url.slice(url.indexOf('?') + 1, url.length))
					.split('&');

			for (var i = 0; i < parameters.length; i++) {
				var varName = parameters[i].split('=')[0];
				if (varName.toUpperCase() == paramName.toUpperCase()) {
					returnValue = parameters[i].split('=')[1];
					return decodeURIComponent(returnValue);
				}
			}
		};
		console.log(getParameters('bno'));
		
		// 수정 완료
		$("button[type='submit']").click(function () {	
			if($("input[name='title']").val() != null){
			$.ajax({
				url : "/torrent/board1update.json",
				data : {
					bno: getParameters('bno'),	
					title: $("input[name='title']").val(),	
					content: $("textarea[name='content']").val()	
				}
			
			}).done(function() {
				swal({
					  title: "수정 완료",
					  type: "success",
					  confirmButtonColor: "#DC143C",
					  confirmButtonText: "확인"
					},
					function(){
						location.href="/torrent/views/board/board1.html";
					});
				})
			} else {
				swal{
					  title: "수정 완료",
					  type: "success",
					  confirmButtonColor: "#DC143C",
					  confirmButtonText: "확인"
					}
			}
		})
		
		// 입력된 내용
		function makeDetail(result) {
			var source = $("#list-template").html();
			var template = Handlebars.compile(source);
			var html = template(result);
			$("#pageTable").html(html);
		}

		function detail() {
			$.ajax({
				url : "/torrent/board1detail.json",
				data : {
					bno : getParameters('bno')
				}
			}).done(makeDetail);
		}
		detail();
		
		// 목록이동
		$("input[type='button']").click(function () {
			location.href="/torrent/views/board/board1.html";
		});
		
</script>
</body>
</html>